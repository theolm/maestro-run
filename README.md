# Maestro-run: Maestro UI Test GitHub Action

This GitHub Action allows you to run UI tests using the [Maestro](https://cloud.mobile.dev/) framework. Maestro is designed to help developers automate their app's user interface testing on Android and iOS.

## ðŸš§ Early Stages Notice ðŸš§

This action is currently in **early development**. The features and API are subject to change as improvements and new capabilities are introduced. Be aware that breaking changes might occur until a stable version is released.

## Usage

```yaml
name: Run UI Tests with Maestro

on:
  push:
    branches:
      - main
  pull_request:

jobs:
  ui-tests:
    runs-on: ubuntu-latest

    steps:
      - name: Check out repository
        uses: actions/checkout@v2

      - name: Run UI Tests with Maestro
        uses: theolm/maestro-run@v0.1.0-alpha
        with:
          apk-path: './path/to/your/app.apk'
          command: 'maestro test ./sample/android-voyager-flow.yaml'
          report-name: 'report_name'
          record: 'true'
```

## Inputs

| Name                          | Description                                                                           | Required | Default       |
|-------------------------------|---------------------------------------------------------------------------------------|----------|---------------|
| `app-path`                    | The path to your application file (.apk)                                              | Yes      | -             |
| `command`                     | The command to run on maestro. Be aware that some flags are forbiden (e.g. sharding). | Yes      | -             |
| `report-name`                 | The name of the output report.                                                        | No       | 'report'      |
| `emulator-api`                | The android sdk version running on the emulator                                       | No       | '31'          |
| `emulator-profile`            | The emulator profile AKA device                                                       | No       | 'pixel_6_pro' |
| `emulator-ram-size`           | Ram used by the emulator                                                              | No       | '8000M'       |
| `emulator-heap-size`          | Heap size used by the emulator                                                        | No       | '600M'        |
| `emulator-arch`               | Architecture used by the emulator                                                     | No       | 'x86_64'      |
| `emulator-disable-animations` | Disable the animations in the emulator                                                | No       | 'true'        |
| `record`                      | Record the screen during the test                                                     | No       | 'true'        |
| `bit-rate`                    | Bit rate for the recording                                                            | No       | '3000000'     |
| `video-res`                   | Resolution of the recorded video                                                      | No       | '360x780'     |

## Outputs

The action will output an artifact with the report generated by Maestro and a video of the recording.
